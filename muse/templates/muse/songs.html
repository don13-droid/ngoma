{%extends 'base.html'%}
{%block title%}Ingoma-Songs{%endblock%}
{%load crispy_forms_tags%}
{%block content%}
<div id="latestalbum" class="hero pad">
				<div class="container">
					<!-- hero content -->
					<div class="hero-content ">
						<!-- heading -->
						<h2>Ingoma Songs</h2>
						<hr>
						<!-- paragraph -->
						<p>We sing the best <strong class="theme-color">Songs</strong> and now we control the world best <strong class="theme-color">Music</strong>.</p>
					</div>
<div class="featured pad" id="featuredalbum">
				<div class="container">
					<!-- default heading -->

					<form role="form" id="contactForm" method="post">
						<div class="text-center">
							<div class="form-group">
								{{ form | crispy }}
								{% csrf_token %}
								<input type="hidden" name="next" value="{{ next }}" />
								<button type="submit" class="btn btn-lg btn-theme">Search</button>
								</div>
							</div>

					</form>
					{%for genre in genres%}
					<div class="featured pad" id="featuredalbum">
    <div class="container">
        <!-- default heading -->
        <div class="default-heading">
            <!-- heading -->
            <h2>{{genre.name}}</h2>
        </div>
        <!-- featured album elements -->

        <div class="featured-element">
            <!-- start a new row for every four songs -->
            {% for song in genre.top_songs %}
            {% if forloop.counter0|divisibleby:4 %}
            <div class="row">
            {% endif %}
                <div class="col-md-3 col-sm-6">
                    <!-- featured item -->
                    <div class="featured-item ">
                        <!-- image container -->
                        <div class="figure-item ">
                            <!-- image -->
                            <a href="{% url 'muse:buy-play' song_name=song.name song_id=song.id %}">
                            <img class="img-responsive" src="{{song.song_art.url}}" alt="" />
                                </a>
                        </div>
                        <!-- featured information -->
                        <div class="featured-item-info">
                            <!-- featured title -->
                            <h5>
                                {{ song.name }} <a href="{% url 'muse:single-artist' pk=song.artist.id %}">
                                {{ song.artist }}</a>
                                {% if song.features.all %}
                                FT
                                {% for feature in song.features.all %}
                                {{ feature }},
                                {% endfor %}
                                {% endif %}
                            </h5>
                            <span class="label label-theme"><i class="fa fa-music"></i>&nbsp;  {{ song.streams.count }} Streams</span>
                            <span class="label label-theme"> {{ song.comments.count }} Comments</span>
                        </div>
                    </div>
                </div>
            {% if forloop.counter|divisibleby:4 and not forloop.last %}
            </div>
            {% endif %}
			{%endfor%}
            <div class="text-center">
					<a href="{{genre.get_absolute_url}}" class="btn btn-lg btn-theme">View more</a>
					</div>
            <!-- close the row if it's the last item and not divisible by 4 -->
            {% if not forloop.counter|divisibleby:4 and forloop.last %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
	{% endfor %}

{% include "pagination.html" with page=songs %}
{%endblock%}